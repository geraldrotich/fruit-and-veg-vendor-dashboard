<!DOCTYPE html>
<html>
<head>
  <title>Product-Vendor Dashboard</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <nav class="navbar">
    <a href="dashboard-products.html" class="nav-link" id="nav-products">Products</a>
    <a href="dashboard-pdf.html" class="nav-link" id="nav-pdf">Upload PDF</a>
  </nav>
  <script>
    const currentPage = window.location.pathname;
    if (currentPage.includes("products")) {
      document.getElementById("nav-products").classList.add("active");
    } else if (currentPage.includes("pdf")) {
      document.getElementById("nav-pdf").classList.add("active");
    }
  </script>

  <div class="container">
    <h2>Products & Their Vendors</h2>
    <div id="products"></div>
    <div class="vendor-list" id="vendors"></div>
    <canvas id="vendorChart" width="600"></canvas>
  </div>

  <script>
    const data = {
      "Tomatoes": ["Vendor A", "Vendor B", "Vendor C"],
      "Onions": ["Vendor B", "Vendor D"],
      "Cucumbers": ["Vendor A", "Vendor C"]
    };

    const productContainer = document.getElementById('products');
    const vendorContainer = document.getElementById('vendors');

    Object.keys(data).forEach(product => {
      const div = document.createElement('div');
      div.className = 'product';
      div.innerText = product;
      div.onclick = () => showVendors(product);
      productContainer.appendChild(div);
    });

    const ctx = document.getElementById('vendorChart').getContext('2d');
    let vendorChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: [],
        datasets: [{
          label: '',
          data: [],
          backgroundColor: '#42a5f5'
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true,
            ticks: { stepSize: 1 }
          }
        }
      }
    });

    function showVendors(product) {
      const vendors = data[product];
      vendorContainer.innerHTML = `<h3>Vendors for ${product}</h3><ul>` +
        vendors.map(v => `<li>${v}</li>`).join('') + '</ul>';

      vendorChart.data.labels = vendors;
      vendorChart.data.datasets[0].data = vendors.map(() => 1);
      vendorChart.data.datasets[0].label = `Vendors for ${product}`;
      vendorChart.update();
    }
  </script>
</body>
</html>
